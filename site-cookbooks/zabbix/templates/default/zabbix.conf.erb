#
# Zabbix monitoring system php web frontend
#

Alias /zabbix /usr/share/zabbix

<Directory "/usr/share/zabbix">
    AuthType Basic
    AuthName "Enter Password"
    AuthBasicProvider file
    AuthUserFile /etc/httpd/conf.d/passwd
    Require user <%= node["HTPASSWD_USER"] %>

    Options FollowSymLinks
    AllowOverride None
    #Order allow,deny
    #Allow from all
    #Require all granted

    php_value max_execution_time 300
    php_value memory_limit 128M
    php_value post_max_size 16M
    php_value upload_max_filesize 2M
    php_value max_input_time 300
    php_value date.timezone Asia/Tokyo
</Directory>

<Directory "/usr/share/zabbix/conf">
    #Order deny,allow
    #Deny from all
    Require all denied
    <files *.php>
        Order deny,allow
        Deny from all
    </files>
</Directory>

<Directory "/usr/share/zabbix/api">
    #Order deny,allow
    #Deny from all
    Require all denied
    <files *.php>
        Order deny,allow
        Deny from all
    </files>
</Directory>

<Directory "/usr/share/zabbix/include">
    #Order deny,allow
    #Deny from all
    Require all granted
    <files *.php>
        Order deny,allow
        Deny from all
    </files>
</Directory>

<Directory "/usr/share/zabbix/include/classes">
    #Order deny,allow
    #Deny from all
    Require all granted
    <files *.php>
        Order deny,allow
        Deny from all
    </files>
</Directory>
